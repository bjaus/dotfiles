#!/usr/bin/env bash

# Git commit-msg hook to prevent Claude attribution

set -e

COMMIT_MSG_FILE="$1"

# Remove Claude attribution lines
sed -i '' '/ðŸ¤– Generated with \[Claude Code\]/d' "$COMMIT_MSG_FILE"
sed -i '' '/Co-Authored-By: Claude <noreply@anthropic\.com>/d' "$COMMIT_MSG_FILE"
sed -i '' '/Co-authored-by: Claude <noreply@anthropic\.com>/d' "$COMMIT_MSG_FILE"
sed -i '' '/Claude <noreply@anthropic\.com>/d' "$COMMIT_MSG_FILE"

# Remove any lines containing "Claude" in commit attribution context
sed -i '' '/Co-[Aa]uthored-[Bb]y:.*[Cc]laude/d' "$COMMIT_MSG_FILE"
sed -i '' '/Generated.*[Cc]laude/d' "$COMMIT_MSG_FILE"

# Remove extra blank lines that might be left behind
sed -i '' '/^$/N;/^\n$/d' "$COMMIT_MSG_FILE"

exit 0
